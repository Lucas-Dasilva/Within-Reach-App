(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{qhKe:function(t,n,o){"use strict";o.r(n),o.d(n,"CommentsPageModule",(function(){return z}));var e=o("ofXK"),i=o("3Pt+"),c=o("TEn/"),s=o("tyNb"),r=o("mrSG"),b=o("2Vo4"),l=o("eIep"),a=o("XNiG"),p=o("fXoL"),d=o("EQNs"),u=o("2ZZ0"),g=o("qfBg"),h=o("/Hhz"),m=o("tk/3");function f(t,n){if(1&t&&(p.Kb(0,"div",2),p.Ib(1,"ion-icon",3),p.Kb(2,"div",4),p.jc(3),p.Jb(),p.Ib(4,"ion-icon",5),p.Jb()),2&t){const t=p.Ub();p.xb(3),p.kc(t.votecount)}}const _=function(t){return{"active up":t}},v=function(t){return{"active down":t}};function C(t,n){if(1&t){const t=p.Lb();p.Kb(0,"div",2),p.Kb(1,"ion-icon",6),p.Sb("click",(function(){return p.dc(t),p.Ub().upVote()})),p.Jb(),p.Kb(2,"div",4),p.jc(3),p.Jb(),p.Kb(4,"ion-icon",7),p.Sb("click",(function(){return p.dc(t),p.Ub().downVote()})),p.Jb(),p.Jb()}if(2&t){const t=p.Ub();p.xb(1),p.Zb("ngClass",p.ac(3,_,t.user_vote>0)),p.xb(2),p.kc(t.votecount),p.xb(1),p.Zb("ngClass",p.ac(5,v,t.user_vote<0))}}let y=(()=>{class t{constructor(t,n){this.user=t,this.http=n,this.owner=!1,this.url="https://officialwithinreach.herokuapp.com/"}ngOnInit(){return Object(r.a)(this,void 0,void 0,(function*(){yield this.user.userInfo(),this.local_user=this.user.uuid;const t=this.reactions.find(t=>t.post==this.reply_id);null!=t&&(this.user_vote=t.status),this.votecount=this.likes,this.post_user==this.local_user&&(this.owner=!0)}))}upVote(){1==this.user_vote?(this.user_vote=0,this.votecount=this.votecount-1):-1==this.user_vote?(this.user_vote=1,this.votecount=this.votecount+2):(this.user_vote=1,this.votecount=this.votecount+1),this.http.post(this.url+"upvotereplyHandler",{user_id:this.local_user,reply_id:this.reply_id},{responseType:"text"}).toPromise().then(t=>{}).catch(console.log)}downVote(){-1==this.user_vote?(this.user_vote=0,this.votecount=this.votecount+1):1==this.user_vote?(this.user_vote=-1,this.votecount=this.votecount-2):(this.user_vote=-1,this.votecount=this.votecount-1),this.http.post(this.url+"downvotereplyHandler",{user_id:this.local_user,reply_id:this.reply_id},{responseType:"text"}).toPromise().then(t=>{}).catch(console.log)}}return t.\u0275fac=function(n){return new(n||t)(p.Hb(g.a),p.Hb(m.b))},t.\u0275cmp=p.Bb({type:t,selectors:[["app-reply-vote-button"]],inputs:{post_user:"post_user",reply_id:"reply_id",likes:"likes",reactions:"reactions"},decls:3,vars:2,consts:[["class","votebox",4,"ngIf","ngIfElse"],["react",""],[1,"votebox"],["name","chevron-up",1,"active","up"],[1,"likecount"],["name","chevron-down",1,"vote"],["name","chevron-up",3,"ngClass","click"],["name","chevron-down",3,"ngClass","click"]],template:function(t,n){if(1&t&&(p.hc(0,f,5,1,"div",0),p.hc(1,C,5,7,"ng-template",null,1,p.ic)),2&t){const t=p.cc(2);p.Zb("ngIf",1==n.owner)("ngIfElse",t)}},directives:[e.k,c.n,e.i],styles:["@media (prefers-color-scheme:light){.votebox[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:2em;align-items:center;color:#dce1e5}.votebox[_ngcontent-%COMP%]   .active.down[_ngcontent-%COMP%], .votebox[_ngcontent-%COMP%]   .active.up[_ngcontent-%COMP%]{color:#5600f7}.likecount[_ngcontent-%COMP%]{font-size:.65em;color:#5f656d}}@media (prefers-color-scheme:dark){.votebox[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:2em;align-items:center;color:#555b62}.votebox[_ngcontent-%COMP%]   .active.down[_ngcontent-%COMP%], .votebox[_ngcontent-%COMP%]   .active.up[_ngcontent-%COMP%]{color:#5600f7}.likecount[_ngcontent-%COMP%]{font-size:.6em;color:#bcbbbe}}"]}),t})();var x=o("Wu1i");function O(t,n){1&t&&(p.Kb(0,"ion-col",25),p.Ib(1,"ion-icon",26),p.Kb(2,"div",27),p.jc(3,"none"),p.Jb(),p.Jb())}function P(t,n){1&t&&(p.Kb(0,"ion-col",25),p.Ib(1,"ion-icon",26),p.Kb(2,"div",27),p.jc(3,"1 reply"),p.Jb(),p.Jb())}function M(t,n){if(1&t&&(p.Kb(0,"ion-col",25),p.Ib(1,"ion-icon",28),p.Kb(2,"div",27),p.jc(3),p.Jb(),p.Jb()),2&t){const t=p.Ub().ngIf;p.xb(3),p.lc("",t.post.reply_count," replies")}}function k(t,n){if(1&t&&(p.Kb(0,"ion-card",29),p.Kb(1,"ion-row"),p.Kb(2,"ion-col",15),p.jc(3),p.Jb(),p.Kb(4,"ion-col",16),p.Ib(5,"app-reply-vote-button",30),p.Jb(),p.Jb(),p.Kb(6,"ion-row",18),p.Kb(7,"ion-col",19),p.jc(8),p.Vb(9,"datepipe"),p.Jb(),p.Ib(10,"ion-col",22),p.Ib(11,"ion-col",22),p.Jb(),p.Jb()),2&t){const t=n.$implicit,o=p.Ub().ngIf;p.xb(3),p.lc(" ",t.body," "),p.xb(2),p.Zb("reactions",o.react_list)("reply_id",t.id)("post_user",t.user_id)("likes",t.likes),p.xb(3),p.lc(" ",p.Wb(9,6,t.timestamp)," ")}}function w(t,n){}function J(t,n){if(1&t&&(p.Kb(0,"ion-content",11),p.Kb(1,"div",12),p.Kb(2,"ion-card",13),p.Kb(3,"ion-row",14),p.Kb(4,"ion-col",15),p.jc(5),p.Jb(),p.Kb(6,"ion-col",16),p.Ib(7,"app-vote-button",17),p.Jb(),p.Jb(),p.Kb(8,"ion-row",18),p.Kb(9,"ion-col",19),p.Ib(10,"ion-icon",20),p.jc(11),p.Vb(12,"datepipe"),p.Jb(),p.hc(13,O,4,0,"ion-col",21),p.hc(14,P,4,0,"ion-col",21),p.hc(15,M,4,1,"ion-col",21),p.Ib(16,"ion-col",22),p.Jb(),p.Jb(),p.Jb(),p.Kb(17,"ion-list"),p.hc(18,k,12,8,"ion-card",23),p.Jb(),p.hc(19,w,0,0,"ng-template",null,24,p.ic),p.Jb()),2&t){const t=n.ngIf;p.xb(5),p.lc(" ",t.post.body," "),p.xb(2),p.Zb("reactions",t.post_reactions)("post_id",t.post.id)("post_user",t.post.user_id)("likes",t.post.likes),p.xb(4),p.lc(" ",p.Wb(12,10,t.post.timestamp)," "),p.xb(2),p.Zb("ngIf",0==t.post.reply_count),p.xb(1),p.Zb("ngIf",1==t.post.reply_count),p.xb(1),p.Zb("ngIf",t.post.reply_count>1),p.xb(3),p.Zb("ngForOf",t.reply_list)}}const K=[{path:"",component:(()=>{class t{constructor(t,n,o,e,i){this.nav=t,this.route=n,this.getData=o,this.postData=e,this.user=i,this.stopPolling=new a.a,this.refresh$=new b.a(!0),this.replyBody="",this.route.queryParams.subscribe(t=>{t&&(this.post_id=JSON.parse(t.post_id))})}ngOnInit(){return Object(r.a)(this,void 0,void 0,(function*(){yield this.user.userInfo(),this.replys$=this.refresh$.pipe(Object(l.a)(t=>this.getData.getReplys(this.post_id,this.user.uuid)))}))}sendReply(){0!=this.replyBody.length&&this.postData.createReplyRequest(this.user.uuid,this.post_id,this.replyBody).then(()=>{this.refresh$.next(!0)})}gotToHome(){this.nav.back()}ngOnDestroy(){this.stopPolling.next()}}return t.\u0275fac=function(n){return new(n||t)(p.Hb(c.F),p.Hb(s.a),p.Hb(d.a),p.Hb(u.a),p.Hb(g.a))},t.\u0275cmp=p.Bb({type:t,selectors:[["app-comments"]],decls:19,vars:4,consts:[["slot","start"],["defaultHref","home","text","","icon","chevron-back"],[1,"centercontent"],[1,"label"],["slot","end"],["name","flag-outline"],["class","botContent",4,"ngIf"],["lines","full"],["minlength","1","maxlength","500","autocorrect","on","autocomplete","on","inputmode","text","autofocus","true","placeholder","Reply Back",3,"ngModel","ngModelChange"],["autofocus",""],["type","submit","expand","block",1,"sendButton",3,"click"],[1,"botContent"],[1,"topContent"],[1,"mainCard"],[1,"mainRow"],[1,"body"],["size","2",1,"vote"],[3,"reactions","post_id","post_user","likes"],["size","1"],["size","5",1,"time"],["name","time-outline"],["size","4","class","reply",4,"ngIf"],[1,"reply"],["class","replyCard",4,"ngFor","ngForOf"],["loading",""],["size","4",1,"reply"],["name","chatbubble-outline"],[1,"text"],["name","chatbubbles-outline"],[1,"replyCard"],[3,"reactions","reply_id","post_user","likes"]],template:function(t,n){1&t&&(p.Kb(0,"ion-header"),p.Kb(1,"ion-toolbar"),p.Kb(2,"ion-buttons",0),p.Kb(3,"ion-button"),p.Ib(4,"ion-back-button",1),p.Jb(),p.Jb(),p.Kb(5,"div",2),p.Kb(6,"ion-label",3),p.jc(7,"Comments"),p.Jb(),p.Jb(),p.Kb(8,"ion-buttons",4),p.Kb(9,"ion-button"),p.Ib(10,"ion-icon",5),p.Jb(),p.Jb(),p.Jb(),p.Jb(),p.hc(11,J,21,12,"ion-content",6),p.Vb(12,"async"),p.Kb(13,"ion-footer"),p.Kb(14,"ion-item",7),p.Kb(15,"ion-input",8,9),p.Sb("ngModelChange",(function(t){return n.replyBody=t})),p.Jb(),p.Kb(17,"ion-button",10),p.Sb("click",(function(){return n.sendReply()})),p.jc(18,"Send"),p.Jb(),p.Jb(),p.Jb()),2&t&&(p.xb(11),p.Zb("ngIf",p.Wb(12,2,n.replys$)),p.xb(4),p.Zb("ngModel",n.replyBody))},directives:[c.m,c.A,c.f,c.e,c.c,c.d,c.q,c.n,e.k,c.k,c.p,c.o,c.I,i.c,i.b,i.f,i.g,c.j,c.g,c.v,c.i,h.a,c.r,e.j,y],pipes:[e.b,x.a],styles:["ion-back-button[_ngcontent-%COMP%], ion-button[_ngcontent-%COMP%]{--color:#5600f7}ion-input[_ngcontent-%COMP%]{--border-radius:5px;--padding-bottom:.5em;--padding-top:.5em;--padding-left:.5em;--padding-right:.5em}ion-icon[_ngcontent-%COMP%]{vertical-align:middle;padding-bottom:3px}ion-content[_ngcontent-%COMP%]{position:absolute}.scroll-content[_ngcontent-%COMP%], .topContent[_ngcontent-%COMP%]{padding-bottom:0!important}.mainRow[_ngcontent-%COMP%]{height:10em}.time[_ngcontent-%COMP%]{padding-top:0;padding-left:1em;color:#7972da}.vote[_ngcontent-%COMP%]{display:flex;padding-bottom:0;align-items:center}.reply[_ngcontent-%COMP%]{justify-content:left;padding-top:0;display:flex}.text[_ngcontent-%COMP%]{margin-left:.5em}.body[_ngcontent-%COMP%]{padding:1em}.centercontent[_ngcontent-%COMP%]{text-align:center;font-weight:700}.cancel[_ngcontent-%COMP%]{color:#f04747}.send[_ngcontent-%COMP%]{color:#5600f7}ion-footer[_ngcontent-%COMP%]{z-index:2}@media (prefers-color-scheme:light){.topContent[_ngcontent-%COMP%]{vertical-align:middle;background-color:#fff;height:33%;width:100%;padding-bottom:1em;padding-top:1em}.mainCard[_ngcontent-%COMP%], .replyCard[_ngcontent-%COMP%]{box-shadow:5px 5px 15px 5px hsla(0,0%,66.7%,.41)}ion-list[_ngcontent-%COMP%]{width:100%;background-color:#e6e6e6}.botContent[_ngcontent-%COMP%]{--background:#e6e6e6}ion-item[_ngcontent-%COMP%]{border-top:.5px solid rgba(86,0,247,.615686274509804);border-bottom:0}ion-input[_ngcontent-%COMP%]{color:#5f656d;font-weight:400;font-size:medium;--padding-bottom:0;--padding-top:0;margin-right:1em}ion-button.sendButton.button[_ngcontent-%COMP%]{--border-radius:5px;--background:#5600f7;color:#f2f5eb}}@media (prefers-color-scheme:dark){.topContent[_ngcontent-%COMP%]{vertical-align:middle;background-color:#2f3237;height:33%;width:100%;padding-bottom:1em;padding-top:1em}ion-card[_ngcontent-%COMP%]{box-shadow:2px 2px 17px 4px rgba(0,0,0,.41)}ion-list[_ngcontent-%COMP%]{width:100%;background-color:#202225}.botContent[_ngcontent-%COMP%]{--background:#202225}.footertoolbar[_ngcontent-%COMP%]{padding:0;--border-color:hsla(0,0%,100%,0.615686274509804)}ion-item[_ngcontent-%COMP%]{border-top:.5px solid rgba(86,0,247,.615686274509804);border-bottom:0}ion-input[_ngcontent-%COMP%]{color:#bcbbbe;font-weight:400;font-size:medium;--padding-bottom:0;--padding-top:0;margin-right:1em}ion-button.sendButton.button[_ngcontent-%COMP%]{--border-radius:5px;--background:rgba(86,0,247,0.615686274509804);color:#f2f5eb}}@media only screen and (max-height:738px){.topContent[_ngcontent-%COMP%]{height:35%}.mainRow[_ngcontent-%COMP%]{height:8em}}@media only screen and (max-height:668px){.topContent[_ngcontent-%COMP%]{height:35%}.mainRow[_ngcontent-%COMP%]{height:8em}}@media only screen and (max-height:641px){.topContent[_ngcontent-%COMP%]{height:30%}.mainRow[_ngcontent-%COMP%]{height:6em}}@media only screen and (max-height:569px){.topContent[_ngcontent-%COMP%]{height:35%}.mainRow[_ngcontent-%COMP%]{height:6em}}"]}),t})()}];let I=(()=>{class t{}return t.\u0275mod=p.Fb({type:t}),t.\u0275inj=p.Eb({factory:function(n){return new(n||t)},imports:[[s.i.forChild(K)],s.i]}),t})();var j=o("nETc");let z=(()=>{class t{}return t.\u0275mod=p.Fb({type:t}),t.\u0275inj=p.Eb({factory:function(n){return new(n||t)},imports:[[e.c,i.a,c.B,I,j.a]]}),t})()}}]);