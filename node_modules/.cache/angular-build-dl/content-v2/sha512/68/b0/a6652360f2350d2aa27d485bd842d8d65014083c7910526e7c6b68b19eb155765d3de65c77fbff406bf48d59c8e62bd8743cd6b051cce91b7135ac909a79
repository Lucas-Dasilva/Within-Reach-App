!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function e(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{qhKe:function(n,o,i){"use strict";i.r(o),i.d(o,"CommentsPageModule",(function(){return V}));var c=i("ofXK"),r=i("3Pt+"),s=i("TEn/"),a=i("tyNb"),b=i("mrSG"),l=i("2Vo4"),u=i("eIep"),p=i("XNiG"),d=i("fXoL"),h=i("EQNs"),g=i("2ZZ0"),f=i("qfBg"),m=i("/Hhz"),v=i("tk/3");function _(t,n){if(1&t&&(d.Kb(0,"div",2),d.Ib(1,"ion-icon",3),d.Kb(2,"div",4),d.jc(3),d.Jb(),d.Ib(4,"ion-icon",5),d.Jb()),2&t){var e=d.Ub();d.xb(3),d.kc(e.votecount)}}var y=function(t){return{"active up":t}},C=function(t){return{"active down":t}};function x(t,n){if(1&t){var e=d.Lb();d.Kb(0,"div",2),d.Kb(1,"ion-icon",6),d.Sb("click",(function(){return d.dc(e),d.Ub().upVote()})),d.Jb(),d.Kb(2,"div",4),d.jc(3),d.Jb(),d.Kb(4,"ion-icon",7),d.Sb("click",(function(){return d.dc(e),d.Ub().downVote()})),d.Jb(),d.Jb()}if(2&t){var o=d.Ub();d.xb(1),d.Zb("ngClass",d.ac(3,y,o.user_vote>0)),d.xb(2),d.kc(o.votecount),d.xb(1),d.Zb("ngClass",d.ac(5,C,o.user_vote<0))}}var O,P=((O=function(){function n(e,o){t(this,n),this.user=e,this.http=o,this.owner=!1,this.url="https://officialwithinreach.herokuapp.com/"}return e(n,[{key:"ngOnInit",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.user.userInfo();case 2:this.local_user=this.user.uuid,null!=(n=this.reactions.find((function(t){return t.post==e.reply_id})))&&(this.user_vote=n.status),this.votecount=this.likes,this.post_user==this.local_user&&(this.owner=!0);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"upVote",value:function(){1==this.user_vote?(this.user_vote=0,this.votecount=this.votecount-1):-1==this.user_vote?(this.user_vote=1,this.votecount=this.votecount+2):(this.user_vote=1,this.votecount=this.votecount+1),this.http.post(this.url+"upvotereplyHandler",{user_id:this.local_user,reply_id:this.reply_id},{responseType:"text"}).toPromise().then((function(t){})).catch(console.log)}},{key:"downVote",value:function(){-1==this.user_vote?(this.user_vote=0,this.votecount=this.votecount+1):1==this.user_vote?(this.user_vote=-1,this.votecount=this.votecount-2):(this.user_vote=-1,this.votecount=this.votecount-1),this.http.post(this.url+"downvotereplyHandler",{user_id:this.local_user,reply_id:this.reply_id},{responseType:"text"}).toPromise().then((function(t){})).catch(console.log)}}]),n}()).\u0275fac=function(t){return new(t||O)(d.Hb(f.a),d.Hb(v.b))},O.\u0275cmp=d.Bb({type:O,selectors:[["app-reply-vote-button"]],inputs:{post_user:"post_user",reply_id:"reply_id",likes:"likes",reactions:"reactions"},decls:3,vars:2,consts:[["class","votebox",4,"ngIf","ngIfElse"],["react",""],[1,"votebox"],["name","chevron-up",1,"active","up"],[1,"likecount"],["name","chevron-down",1,"vote"],["name","chevron-up",3,"ngClass","click"],["name","chevron-down",3,"ngClass","click"]],template:function(t,n){if(1&t&&(d.hc(0,_,5,1,"div",0),d.hc(1,x,5,7,"ng-template",null,1,d.ic)),2&t){var e=d.cc(2);d.Zb("ngIf",1==n.owner)("ngIfElse",e)}},directives:[c.k,s.n,c.i],styles:["@media (prefers-color-scheme:light){.votebox[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:2em;align-items:center;color:#dce1e5}.votebox[_ngcontent-%COMP%]   .active.down[_ngcontent-%COMP%], .votebox[_ngcontent-%COMP%]   .active.up[_ngcontent-%COMP%]{color:#5600f7}.likecount[_ngcontent-%COMP%]{font-size:.65em;color:#5f656d}}@media (prefers-color-scheme:dark){.votebox[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:2em;align-items:center;color:#555b62}.votebox[_ngcontent-%COMP%]   .active.down[_ngcontent-%COMP%], .votebox[_ngcontent-%COMP%]   .active.up[_ngcontent-%COMP%]{color:#5600f7}.likecount[_ngcontent-%COMP%]{font-size:.6em;color:#bcbbbe}}"]}),O),M=i("Wu1i");function k(t,n){1&t&&(d.Kb(0,"ion-col",25),d.Ib(1,"ion-icon",26),d.Kb(2,"div",27),d.jc(3,"none"),d.Jb(),d.Jb())}function w(t,n){1&t&&(d.Kb(0,"ion-col",25),d.Ib(1,"ion-icon",26),d.Kb(2,"div",27),d.jc(3,"1 reply"),d.Jb(),d.Jb())}function J(t,n){if(1&t&&(d.Kb(0,"ion-col",25),d.Ib(1,"ion-icon",28),d.Kb(2,"div",27),d.jc(3),d.Jb(),d.Jb()),2&t){var e=d.Ub().ngIf;d.xb(3),d.lc("",e.post.reply_count," replies")}}function K(t,n){if(1&t&&(d.Kb(0,"ion-card",29),d.Kb(1,"ion-row"),d.Kb(2,"ion-col",15),d.jc(3),d.Jb(),d.Kb(4,"ion-col",16),d.Ib(5,"app-reply-vote-button",30),d.Jb(),d.Jb(),d.Kb(6,"ion-row",18),d.Kb(7,"ion-col",19),d.jc(8),d.Vb(9,"datepipe"),d.Jb(),d.Ib(10,"ion-col",22),d.Ib(11,"ion-col",22),d.Jb(),d.Jb()),2&t){var e=n.$implicit,o=d.Ub().ngIf;d.xb(3),d.lc(" ",e.body," "),d.xb(2),d.Zb("reactions",o.react_list)("reply_id",e.id)("post_user",e.user_id)("likes",e.likes),d.xb(3),d.lc(" ",d.Wb(9,6,e.timestamp)," ")}}function I(t,n){}function j(t,n){if(1&t&&(d.Kb(0,"ion-content",11),d.Kb(1,"div",12),d.Kb(2,"ion-card",13),d.Kb(3,"ion-row",14),d.Kb(4,"ion-col",15),d.jc(5),d.Jb(),d.Kb(6,"ion-col",16),d.Ib(7,"app-vote-button",17),d.Jb(),d.Jb(),d.Kb(8,"ion-row",18),d.Kb(9,"ion-col",19),d.Ib(10,"ion-icon",20),d.jc(11),d.Vb(12,"datepipe"),d.Jb(),d.hc(13,k,4,0,"ion-col",21),d.hc(14,w,4,0,"ion-col",21),d.hc(15,J,4,1,"ion-col",21),d.Ib(16,"ion-col",22),d.Jb(),d.Jb(),d.Jb(),d.Kb(17,"ion-list"),d.hc(18,K,12,8,"ion-card",23),d.Jb(),d.hc(19,I,0,0,"ng-template",null,24,d.ic),d.Jb()),2&t){var e=n.ngIf;d.xb(5),d.lc(" ",e.post.body," "),d.xb(2),d.Zb("reactions",e.post_reactions)("post_id",e.post.id)("post_user",e.post.user_id)("likes",e.post.likes),d.xb(4),d.lc(" ",d.Wb(12,10,e.post.timestamp)," "),d.xb(2),d.Zb("ngIf",0==e.post.reply_count),d.xb(1),d.Zb("ngIf",1==e.post.reply_count),d.xb(1),d.Zb("ngIf",e.post.reply_count>1),d.xb(3),d.Zb("ngForOf",e.reply_list)}}var R,z,B,Z=[{path:"",component:(R=function(){function n(e,o,i,c,r){var s=this;t(this,n),this.nav=e,this.route=o,this.getData=i,this.postData=c,this.user=r,this.stopPolling=new p.a,this.refresh$=new l.a(!0),this.replyBody="",this.route.queryParams.subscribe((function(t){t&&(s.post_id=JSON.parse(t.post_id))}))}return e(n,[{key:"ngOnInit",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.user.userInfo();case 2:this.replys$=this.refresh$.pipe(Object(u.a)((function(t){return n.getData.getReplys(n.post_id,n.user.uuid)})));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"sendReply",value:function(){var t=this;0!=this.replyBody.length&&this.postData.createReplyRequest(this.user.uuid,this.post_id,this.replyBody).then((function(){t.refresh$.next(!0)}))}},{key:"gotToHome",value:function(){this.nav.back()}},{key:"ngOnDestroy",value:function(){this.stopPolling.next()}}]),n}(),R.\u0275fac=function(t){return new(t||R)(d.Hb(s.F),d.Hb(a.a),d.Hb(h.a),d.Hb(g.a),d.Hb(f.a))},R.\u0275cmp=d.Bb({type:R,selectors:[["app-comments"]],decls:19,vars:4,consts:[["slot","start"],["defaultHref","home","text","","icon","chevron-back"],[1,"centercontent"],[1,"label"],["slot","end"],["name","flag-outline"],["class","botContent",4,"ngIf"],["lines","full"],["minlength","1","maxlength","500","autocorrect","on","autocomplete","on","inputmode","text","autofocus","true","placeholder","Reply Back",3,"ngModel","ngModelChange"],["autofocus",""],["type","submit","expand","block",1,"sendButton",3,"click"],[1,"botContent"],[1,"topContent"],[1,"mainCard"],[1,"mainRow"],[1,"body"],["size","2",1,"vote"],[3,"reactions","post_id","post_user","likes"],["size","1"],["size","5",1,"time"],["name","time-outline"],["size","4","class","reply",4,"ngIf"],[1,"reply"],["class","replyCard",4,"ngFor","ngForOf"],["loading",""],["size","4",1,"reply"],["name","chatbubble-outline"],[1,"text"],["name","chatbubbles-outline"],[1,"replyCard"],[3,"reactions","reply_id","post_user","likes"]],template:function(t,n){1&t&&(d.Kb(0,"ion-header"),d.Kb(1,"ion-toolbar"),d.Kb(2,"ion-buttons",0),d.Kb(3,"ion-button"),d.Ib(4,"ion-back-button",1),d.Jb(),d.Jb(),d.Kb(5,"div",2),d.Kb(6,"ion-label",3),d.jc(7,"Comments"),d.Jb(),d.Jb(),d.Kb(8,"ion-buttons",4),d.Kb(9,"ion-button"),d.Ib(10,"ion-icon",5),d.Jb(),d.Jb(),d.Jb(),d.Jb(),d.hc(11,j,21,12,"ion-content",6),d.Vb(12,"async"),d.Kb(13,"ion-footer"),d.Kb(14,"ion-item",7),d.Kb(15,"ion-input",8,9),d.Sb("ngModelChange",(function(t){return n.replyBody=t})),d.Jb(),d.Kb(17,"ion-button",10),d.Sb("click",(function(){return n.sendReply()})),d.jc(18,"Send"),d.Jb(),d.Jb(),d.Jb()),2&t&&(d.xb(11),d.Zb("ngIf",d.Wb(12,2,n.replys$)),d.xb(4),d.Zb("ngModel",n.replyBody))},directives:[s.m,s.A,s.f,s.e,s.c,s.d,s.q,s.n,c.k,s.k,s.p,s.o,s.I,r.c,r.b,r.f,r.g,s.j,s.g,s.v,s.i,m.a,s.r,c.j,P],pipes:[c.b,M.a],styles:["ion-back-button[_ngcontent-%COMP%], ion-button[_ngcontent-%COMP%]{--color:#5600f7}ion-input[_ngcontent-%COMP%]{--border-radius:5px;--padding-bottom:.5em;--padding-top:.5em;--padding-left:.5em;--padding-right:.5em}.scroll-content[_ngcontent-%COMP%]{padding-bottom:0!important}ion-icon[_ngcontent-%COMP%]{vertical-align:middle;padding-bottom:3px}.mainRow[_ngcontent-%COMP%]{height:10em}.time[_ngcontent-%COMP%]{padding-top:0;padding-left:1em;color:#7972da}.vote[_ngcontent-%COMP%]{display:flex;padding-bottom:0;align-items:center}.reply[_ngcontent-%COMP%]{justify-content:left;padding-top:0;display:flex}.text[_ngcontent-%COMP%]{margin-left:.5em}.body[_ngcontent-%COMP%]{padding:1em}.centercontent[_ngcontent-%COMP%]{text-align:center;font-weight:700}.cancel[_ngcontent-%COMP%]{color:#f04747}.send[_ngcontent-%COMP%]{color:#5600f7}ion-footer[_ngcontent-%COMP%]{z-index:2}@media (prefers-color-scheme:light){.topContent[_ngcontent-%COMP%]{vertical-align:middle;background-color:#fff;height:33%;width:100%;padding-bottom:1em;padding-top:1em}.mainCard[_ngcontent-%COMP%], .replyCard[_ngcontent-%COMP%]{box-shadow:5px 5px 15px 5px hsla(0,0%,66.7%,.41)}ion-list[_ngcontent-%COMP%]{width:100%;background-color:#e6e6e6}.botContent[_ngcontent-%COMP%]{--background:#e6e6e6}ion-item[_ngcontent-%COMP%]{border-top:.5px solid rgba(86,0,247,.615686274509804);border-bottom:0}ion-input[_ngcontent-%COMP%]{color:#5f656d;font-weight:400;font-size:medium;--padding-bottom:0;--padding-top:0;margin-right:1em}ion-button.sendButton.button[_ngcontent-%COMP%]{--border-radius:5px;--background:#5600f7;color:#f2f5eb}}@media (prefers-color-scheme:dark){.topContent[_ngcontent-%COMP%]{vertical-align:middle;background-color:#2f3237;height:33%;width:100%;padding-bottom:1em;padding-top:1em}ion-card[_ngcontent-%COMP%]{box-shadow:2px 2px 17px 4px rgba(0,0,0,.41)}ion-list[_ngcontent-%COMP%]{width:100%;background-color:#202225}.botContent[_ngcontent-%COMP%]{--background:#202225}.footertoolbar[_ngcontent-%COMP%]{padding:0;--border-color:hsla(0,0%,100%,0.615686274509804)}ion-item[_ngcontent-%COMP%]{border-top:.5px solid rgba(86,0,247,.615686274509804);border-bottom:0}ion-input[_ngcontent-%COMP%]{color:#bcbbbe;font-weight:400;font-size:medium;--padding-bottom:0;--padding-top:0;margin-right:1em}ion-button.sendButton.button[_ngcontent-%COMP%]{--border-radius:5px;--background:rgba(86,0,247,0.615686274509804);color:#f2f5eb}}@media only screen and (max-height:738px){.topContent[_ngcontent-%COMP%]{height:35%}.mainRow[_ngcontent-%COMP%]{height:8em}}@media only screen and (max-height:668px){.topContent[_ngcontent-%COMP%]{height:35%}.mainRow[_ngcontent-%COMP%]{height:8em}}@media only screen and (max-height:641px){.topContent[_ngcontent-%COMP%]{height:30%}.mainRow[_ngcontent-%COMP%]{height:6em}}@media only screen and (max-height:569px){.topContent[_ngcontent-%COMP%]{height:35%}.mainRow[_ngcontent-%COMP%]{height:6em}}"]}),R)}],H=((z=function n(){t(this,n)}).\u0275mod=d.Fb({type:z}),z.\u0275inj=d.Eb({factory:function(t){return new(t||z)},imports:[[a.i.forChild(Z)],a.i]}),z),E=i("nETc"),V=((B=function n(){t(this,n)}).\u0275mod=d.Fb({type:B}),B.\u0275inj=d.Eb({factory:function(t){return new(t||B)},imports:[[c.c,r.a,s.B,H,E.a]]}),B)}}])}();