!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function e(t,e,o){return e&&n(t.prototype,e),o&&n(t,o),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{qhKe:function(n,o,i){"use strict";i.r(o),i.d(o,"CommentsPageModule",(function(){return V}));var c=i("ofXK"),r=i("3Pt+"),s=i("TEn/"),a=i("tyNb"),b=i("mrSG"),l=i("2Vo4"),u=i("eIep"),p=i("XNiG"),h=i("fXoL"),d=i("EQNs"),g=i("2ZZ0"),f=i("qfBg"),m=i("/Hhz"),v=i("tk/3");function _(t,n){if(1&t&&(h.Kb(0,"div",2),h.Ib(1,"ion-icon",3),h.Kb(2,"div",4),h.jc(3),h.Jb(),h.Ib(4,"ion-icon",5),h.Jb()),2&t){var e=h.Ub();h.xb(3),h.kc(e.votecount)}}var y=function(t){return{"active up":t}},C=function(t){return{"active down":t}};function x(t,n){if(1&t){var e=h.Lb();h.Kb(0,"div",2),h.Kb(1,"ion-icon",6),h.Sb("click",(function(){return h.dc(e),h.Ub().upVote()})),h.Jb(),h.Kb(2,"div",4),h.jc(3),h.Jb(),h.Kb(4,"ion-icon",7),h.Sb("click",(function(){return h.dc(e),h.Ub().downVote()})),h.Jb(),h.Jb()}if(2&t){var o=h.Ub();h.xb(1),h.Zb("ngClass",h.ac(3,y,o.user_vote>0)),h.xb(2),h.kc(o.votecount),h.xb(1),h.Zb("ngClass",h.ac(5,C,o.user_vote<0))}}var O,P=((O=function(){function n(e,o){t(this,n),this.user=e,this.http=o,this.owner=!1,this.url="https://officialwithinreach.herokuapp.com/"}return e(n,[{key:"ngOnInit",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,e=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.user.userInfo();case 2:this.local_user=this.user.uuid,null!=(n=this.reactions.find((function(t){return t.post==e.reply_id})))&&(this.user_vote=n.status),this.votecount=this.likes,this.post_user==this.local_user&&(this.owner=!0);case 5:case"end":return t.stop()}}),t,this)})))}},{key:"upVote",value:function(){1==this.user_vote?(this.user_vote=0,this.votecount=this.votecount-1):-1==this.user_vote?(this.user_vote=1,this.votecount=this.votecount+2):(this.user_vote=1,this.votecount=this.votecount+1),this.http.post(this.url+"upvotereplyHandler",{user_id:this.local_user,reply_id:this.reply_id},{responseType:"text"}).toPromise().then((function(t){})).catch(console.log)}},{key:"downVote",value:function(){-1==this.user_vote?(this.user_vote=0,this.votecount=this.votecount+1):1==this.user_vote?(this.user_vote=-1,this.votecount=this.votecount-2):(this.user_vote=-1,this.votecount=this.votecount-1),this.http.post(this.url+"downvotereplyHandler",{user_id:this.local_user,reply_id:this.reply_id},{responseType:"text"}).toPromise().then((function(t){})).catch(console.log)}}]),n}()).\u0275fac=function(t){return new(t||O)(h.Hb(f.a),h.Hb(v.b))},O.\u0275cmp=h.Bb({type:O,selectors:[["app-reply-vote-button"]],inputs:{post_user:"post_user",reply_id:"reply_id",likes:"likes",reactions:"reactions"},decls:3,vars:2,consts:[["class","votebox",4,"ngIf","ngIfElse"],["react",""],[1,"votebox"],["name","chevron-up",1,"active","up"],[1,"likecount"],["name","chevron-down",1,"vote"],["name","chevron-up",3,"ngClass","click"],["name","chevron-down",3,"ngClass","click"]],template:function(t,n){if(1&t&&(h.hc(0,_,5,1,"div",0),h.hc(1,x,5,7,"ng-template",null,1,h.ic)),2&t){var e=h.cc(2);h.Zb("ngIf",1==n.owner)("ngIfElse",e)}},directives:[c.k,s.o,c.i],styles:["@media (prefers-color-scheme:light){.votebox[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:2em;align-items:center;color:#dce1e5}.votebox[_ngcontent-%COMP%]   .active.down[_ngcontent-%COMP%], .votebox[_ngcontent-%COMP%]   .active.up[_ngcontent-%COMP%]{color:#5600f7}.likecount[_ngcontent-%COMP%]{font-size:.65em;color:#5f656d}}@media (prefers-color-scheme:dark){.votebox[_ngcontent-%COMP%]{display:flex;flex-direction:column;font-size:2em;align-items:center;color:#555b62}.votebox[_ngcontent-%COMP%]   .active.down[_ngcontent-%COMP%], .votebox[_ngcontent-%COMP%]   .active.up[_ngcontent-%COMP%]{color:#6161bd}.likecount[_ngcontent-%COMP%]{font-size:.6em;color:#bcbbbe}}"]}),O),k=i("Wu1i"),M=["content"];function w(t,n){1&t&&(h.Kb(0,"ion-col",21),h.Ib(1,"ion-icon",22),h.Kb(2,"div",23),h.jc(3,"none"),h.Jb(),h.Jb())}function J(t,n){1&t&&(h.Kb(0,"ion-col",21),h.Ib(1,"ion-icon",22),h.Kb(2,"div",23),h.jc(3,"1 reply"),h.Jb(),h.Jb())}function K(t,n){if(1&t&&(h.Kb(0,"ion-col",21),h.Ib(1,"ion-icon",24),h.Kb(2,"div",23),h.jc(3),h.Jb(),h.Jb()),2&t){var e=h.Ub().ngIf;h.xb(3),h.lc("",e.post.reply_count," replies")}}function I(t,n){if(1&t&&(h.Kb(0,"div",10),h.Kb(1,"ion-card",11),h.Kb(2,"ion-row",12),h.Kb(3,"ion-col",13),h.jc(4),h.Jb(),h.Kb(5,"ion-col",14),h.Ib(6,"app-vote-button",15),h.Jb(),h.Jb(),h.Kb(7,"ion-row",16),h.Kb(8,"ion-col",17),h.Ib(9,"ion-icon",18),h.jc(10),h.Vb(11,"datepipe"),h.Jb(),h.hc(12,w,4,0,"ion-col",19),h.hc(13,J,4,0,"ion-col",19),h.hc(14,K,4,1,"ion-col",19),h.Ib(15,"ion-col",20),h.Jb(),h.Jb(),h.Jb()),2&t){var e=n.ngIf;h.xb(4),h.lc(" ",e.post.body," "),h.xb(2),h.Zb("reactions",e.post_reactions)("post_id",e.post.id)("post_user",e.post.user_id)("likes",e.post.likes),h.xb(4),h.lc(" ",h.Wb(11,9,e.post.timestamp)," "),h.xb(2),h.Zb("ngIf",0==e.post.reply_count),h.xb(1),h.Zb("ngIf",1==e.post.reply_count),h.xb(1),h.Zb("ngIf",e.post.reply_count>1)}}function j(t,n){if(1&t&&(h.Kb(0,"ion-card",28),h.Kb(1,"ion-row"),h.Kb(2,"ion-col",13),h.jc(3),h.Jb(),h.Kb(4,"ion-col",14),h.Ib(5,"app-reply-vote-button",29),h.Jb(),h.Jb(),h.Kb(6,"ion-row",16),h.Kb(7,"ion-col",17),h.jc(8),h.Vb(9,"datepipe"),h.Jb(),h.Ib(10,"ion-col",20),h.Ib(11,"ion-col",20),h.Jb(),h.Jb()),2&t){var e=n.$implicit,o=h.Ub().ngIf;h.xb(3),h.lc(" ",e.body," "),h.xb(2),h.Zb("reactions",o.react_list)("reply_id",e.id)("post_user",e.user_id)("likes",e.likes),h.xb(3),h.lc(" ",h.Wb(9,6,e.timestamp)," ")}}function R(t,n){if(1&t&&(h.Kb(0,"ion-content",25,26),h.Kb(2,"ion-list"),h.hc(3,j,12,8,"ion-card",27),h.Jb(),h.Jb()),2&t){var e=n.ngIf;h.xb(3),h.Zb("ngForOf",e.reply_list)}}var z,Z,B,H=[{path:"",component:(z=function(){function n(e,o,i,c,r){var s=this;t(this,n),this.nav=e,this.route=o,this.getData=i,this.postData=c,this.user=r,this.stopPolling=new p.a,this.refresh$=new l.a(!0),this.replyBody="",this.route.queryParams.subscribe((function(t){t&&(s.post_id=JSON.parse(t.post_id))}))}return e(n,[{key:"ngOnInit",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.user.userInfo();case 2:this.replys$=this.refresh$.pipe(Object(u.a)((function(t){return n.getData.getReplys(n.post_id,n.user.uuid)})));case 3:case"end":return t.stop()}}),t,this)})))}},{key:"onEnter",value:function(){return Object(b.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=0!=this.replyBody.length,!t.t0){t.next=5;break}return t.next=4,this.postData.createReplyRequest(this.user.uuid,this.post_id,this.replyBody).then((function(){n.refresh$.next(!0)}));case 4:setTimeout((function(){return n.content.scrollToBottom(300)}),250);case 5:this.replyBody="";case 6:case"end":return t.stop()}}),t,this)})))}},{key:"ionViewDidEnter",value:function(){this.content.scrollToBottom(300)}},{key:"gotToHome",value:function(){this.nav.back()}},{key:"ngOnDestroy",value:function(){this.stopPolling.next()}}]),n}(),z.\u0275fac=function(t){return new(t||z)(h.Hb(s.G),h.Hb(a.a),h.Hb(d.a),h.Hb(g.a),h.Hb(f.a))},z.\u0275cmp=h.Bb({type:z,selectors:[["app-comments"]],viewQuery:function(t,n){var e;1&t&&h.mc(M,!0),2&t&&h.bc(e=h.Tb())&&(n.content=e.first)},decls:18,vars:7,consts:[["slot","start"],["defaultHref","home","text","","icon","chevron-back"],[1,"centercontent"],["color","dark",1,"label"],["slot","end"],["name","flag-outline","color","danger"],["class","topContent",4,"ngIf"],["class","botContent",4,"ngIf"],["lines","full",1,"box"],["minlength","1","clearInput","true","maxlength","200","autocorrect","on","autocomplete","on","inputmode","text","autofocus","true","placeholder","Reply Back",3,"ngModel","keyup.enter","ngModelChange"],[1,"topContent"],[1,"mainCard"],[1,"mainRow"],["size","10",1,"body"],["size","2",1,"vote"],[3,"reactions","post_id","post_user","likes"],["size","1"],["size","5",1,"time"],["name","time-outline"],["size","4","class","reply",4,"ngIf"],[1,"reply"],["size","4",1,"reply"],["name","chatbubble-outline"],[1,"text"],["name","chatbubbles-outline"],[1,"botContent"],["content",""],["class","replyCard",4,"ngFor","ngForOf"],[1,"replyCard"],[3,"reactions","reply_id","post_user","likes"]],template:function(t,n){1&t&&(h.Kb(0,"ion-header"),h.Kb(1,"ion-toolbar"),h.Kb(2,"ion-buttons",0),h.Kb(3,"ion-button"),h.Ib(4,"ion-back-button",1),h.Jb(),h.Jb(),h.Kb(5,"div",2),h.Kb(6,"ion-label",3),h.jc(7,"Details"),h.Jb(),h.Jb(),h.Kb(8,"ion-buttons",4),h.Kb(9,"ion-button"),h.Ib(10,"ion-icon",5),h.Jb(),h.Jb(),h.Jb(),h.hc(11,I,16,11,"div",6),h.Vb(12,"async"),h.Jb(),h.hc(13,R,4,1,"ion-content",7),h.Vb(14,"async"),h.Kb(15,"ion-footer"),h.Kb(16,"ion-item",8),h.Kb(17,"ion-input",9),h.Sb("keyup.enter",(function(){return n.onEnter()}))("ngModelChange",(function(t){return n.replyBody=t})),h.Jb(),h.Jb(),h.Jb()),2&t&&(h.xb(11),h.Zb("ngIf",h.Wb(12,3,n.replys$)),h.xb(2),h.Zb("ngIf",h.Wb(14,5,n.replys$)),h.xb(4),h.Zb("ngModel",n.replyBody))},directives:[s.n,s.B,s.g,s.f,s.d,s.e,s.r,s.o,c.k,s.l,s.q,s.p,s.J,r.c,r.b,r.f,r.g,s.h,s.w,s.j,m.a,s.k,s.s,c.j,P],pipes:[c.b,k.a],styles:["ion-back-button[_ngcontent-%COMP%]{--color:#5600f7}ion-icon[_ngcontent-%COMP%]{padding-bottom:3px}.topContent[_ngcontent-%COMP%], ion-icon[_ngcontent-%COMP%]{vertical-align:middle}.topContent[_ngcontent-%COMP%]{border-bottom:2px solid #bcbbbe;background-image:url(/assets/img/mapblur.jpg);background-size:cover;background-repeat:no-repeat;width:100%;padding-top:1em;padding-bottom:1em}.ionic-content[_ngcontent-%COMP%]{--offset-bottom:0!important}.scroll-content[_ngcontent-%COMP%]{padding-bottom:0!important}.mainRow[_ngcontent-%COMP%]{height:10em}.time[_ngcontent-%COMP%]{padding-top:0;padding-left:1em;color:#7972da}.vote[_ngcontent-%COMP%]{display:flex;padding-bottom:0;align-items:center}.reply[_ngcontent-%COMP%]{justify-content:left;padding-top:0;display:flex}.text[_ngcontent-%COMP%]{margin-left:.5em}.body[_ngcontent-%COMP%]{padding:1em}.centercontent[_ngcontent-%COMP%]{text-align:center;font-weight:700}.cancel[_ngcontent-%COMP%]{color:#f04747}@media (prefers-color-scheme:light){.topContent[_ngcontent-%COMP%]{background-color:#fff}.mainCard[_ngcontent-%COMP%], .replyCard[_ngcontent-%COMP%]{box-shadow:5px 5px 15px 5px hsla(0,0%,66.7%,.41)}ion-list[_ngcontent-%COMP%]{width:100%;background-color:#e6e6e6}.botContent[_ngcontent-%COMP%]{--background:#e6e6e6}ion-input[_ngcontent-%COMP%]{background-color:#ddd;border-radius:25px;color:#222;font-weight:400;font-size:medium}ion-item.sc-ion-input-md-h[_ngcontent-%COMP%]:not(.item-label), ion-item[_ngcontent-%COMP%]:not(.item-label)   .sc-ion-input-md-h[_ngcontent-%COMP%]{--padding-start:15px;--padding-end:15px}}@media (prefers-color-scheme:dark){.box[_ngcontent-%COMP%]{margin:1px;border:thin solid #403e39;border-radius:25px}.topContent[_ngcontent-%COMP%]{background-image:url(/assets/img/mapblurDark.jpg);border-bottom:2px solid #403e39;background-color:#2f3237}ion-card[_ngcontent-%COMP%]{box-shadow:2px 2px 17px 4px rgba(0,0,0,.41)}ion-list[_ngcontent-%COMP%]{width:100%;background-color:#202225}.botContent[_ngcontent-%COMP%]{--background:#202225}ion-input[_ngcontent-%COMP%]{color:#bcbbbe;font-weight:400;font-size:medium;--highlight-background:purple}}@media only screen and (max-height:824px){.topContent[_ngcontent-%COMP%]{height:79%}.mainRow[_ngcontent-%COMP%]{height:9em}}@media only screen and (max-height:812px){.topContent[_ngcontent-%COMP%]{height:79%}.mainRow[_ngcontent-%COMP%]{height:7em}}@media only screen and (max-height:738px){.topContent[_ngcontent-%COMP%]{height:75%}.mainRow[_ngcontent-%COMP%]{height:6em}}@media only screen and (max-height:732px){.topContent[_ngcontent-%COMP%]{height:78%}.mainRow[_ngcontent-%COMP%]{height:8em}}@media only screen and (max-height:668px){.topContent[_ngcontent-%COMP%]{height:79%}.mainRow[_ngcontent-%COMP%]{height:7em}}@media only screen and (max-height:641px){.topContent[_ngcontent-%COMP%]{height:76%}.mainRow[_ngcontent-%COMP%]{height:7em}}@media only screen and (max-height:569px){.topContent[_ngcontent-%COMP%]{height:77%}.mainRow[_ngcontent-%COMP%]{height:6em}}"]}),z)}],E=((Z=function n(){t(this,n)}).\u0275mod=h.Fb({type:Z}),Z.\u0275inj=h.Eb({factory:function(t){return new(t||Z)},imports:[[a.i.forChild(H)],a.i]}),Z),T=i("nETc"),V=((B=function n(){t(this,n)}).\u0275mod=h.Fb({type:B}),B.\u0275inj=h.Eb({factory:function(t){return new(t||B)},imports:[[c.c,r.a,s.C,E,T.a]]}),B)}}])}();